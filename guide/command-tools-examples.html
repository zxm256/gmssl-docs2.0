<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>gmssl命令行工具示例 | GmSSL-Docs</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="GmSSL说明文档">
    
    <link rel="preload" href="/gmssl-docs2.0/assets/css/0.styles.3dd227a3.css" as="style"><link rel="preload" href="/gmssl-docs2.0/assets/js/app.1d85ac51.js" as="script"><link rel="preload" href="/gmssl-docs2.0/assets/js/2.a98f6d9f.js" as="script"><link rel="preload" href="/gmssl-docs2.0/assets/js/1.43cfabac.js" as="script"><link rel="preload" href="/gmssl-docs2.0/assets/js/31.ef8c3c31.js" as="script"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/10.18312648.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/11.89ac9f07.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/12.da302e69.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/13.9d2d66b6.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/14.cb88526c.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/15.980f0cec.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/16.f4bf23f4.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/17.3ceb826c.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/18.b434740f.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/19.b0466d00.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/20.404aed17.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/21.491ae04b.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/22.096b5219.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/23.87bde842.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/24.7fcad792.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/25.fa10b3ea.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/26.a3fc9dd7.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/27.0c16171d.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/28.ad52af29.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/29.dbafc828.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/3.e04a1178.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/30.555d9848.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/32.e310fc10.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/33.5b344843.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/34.78ca91f6.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/35.0a98fd25.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/36.d1e4ac7a.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/37.21aaedca.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/4.6aaf9938.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/5.868c619a.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/6.11ff47cc.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/7.3acf3203.js"><link rel="prefetch" href="/gmssl-docs2.0/assets/js/vendors~docsearch.5a4296f1.js">
    <link rel="stylesheet" href="/gmssl-docs2.0/assets/css/0.styles.3dd227a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/gmssl-docs2.0/" class="home-link router-link-active"><!----> <span class="site-name">GmSSL-Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/gmssl-docs2.0/guide/" class="nav-link router-link-active">
  使用指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="多语言支持" class="dropdown-title"><span class="title">多语言支持</span> <span class="arrow down"></span></button> <button type="button" aria-label="多语言支持" class="mobile-dropdown-title"><span class="title">多语言支持</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/gmssl-docs2.0/multilanguage/java.html" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/gmssl-docs2.0/multilanguage/python.html" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/gmssl-docs2.0/multilanguage/php.html" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/gmssl-docs2.0/multilanguage/go.html" class="nav-link">
  Go
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="国密算法接口" class="dropdown-title"><span class="title">国密算法接口</span> <span class="arrow down"></span></button> <button type="button" aria-label="国密算法接口" class="mobile-dropdown-title"><span class="title">国密算法接口</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          分组密码
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/gmssl-docs2.0/crypto/block/sm4.html" class="nav-link">
  SM4
</a></li></ul></li><li class="dropdown-item"><h4>
          公钥密码
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/gmssl-docs2.0/crypto/public/sm2.html" class="nav-link">
  SM2
</a></li></ul></li><li class="dropdown-item"><h4>
          流密码
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/gmssl-docs2.0/crypto/stream/zuc.html" class="nav-link">
  ZUC
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/guanzhi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/gmssl-docs2.0/guide/" class="nav-link router-link-active">
  使用指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="多语言支持" class="dropdown-title"><span class="title">多语言支持</span> <span class="arrow down"></span></button> <button type="button" aria-label="多语言支持" class="mobile-dropdown-title"><span class="title">多语言支持</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/gmssl-docs2.0/multilanguage/java.html" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/gmssl-docs2.0/multilanguage/python.html" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/gmssl-docs2.0/multilanguage/php.html" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/gmssl-docs2.0/multilanguage/go.html" class="nav-link">
  Go
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="国密算法接口" class="dropdown-title"><span class="title">国密算法接口</span> <span class="arrow down"></span></button> <button type="button" aria-label="国密算法接口" class="mobile-dropdown-title"><span class="title">国密算法接口</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          分组密码
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/gmssl-docs2.0/crypto/block/sm4.html" class="nav-link">
  SM4
</a></li></ul></li><li class="dropdown-item"><h4>
          公钥密码
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/gmssl-docs2.0/crypto/public/sm2.html" class="nav-link">
  SM2
</a></li></ul></li><li class="dropdown-item"><h4>
          流密码
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/gmssl-docs2.0/crypto/stream/zuc.html" class="nav-link">
  ZUC
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/guanzhi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/gmssl-docs2.0/guide/" class="sidebar-heading clickable router-link-active"><span>使用指南</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>命令行工具</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/gmssl-docs2.0/guide/command-tools.html" class="sidebar-link">gmssl命令行工具介绍</a></li><li><a href="/gmssl-docs2.0/guide/command-tools-examples.html" aria-current="page" class="active sidebar-link">gmssl命令行工具示例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/gmssl-docs2.0/guide/command-tools-examples.html#sm2算法" class="sidebar-link">SM2算法</a></li><li class="sidebar-sub-header"><a href="/gmssl-docs2.0/guide/command-tools-examples.html#sm3算法" class="sidebar-link">SM3算法</a></li><li class="sidebar-sub-header"><a href="/gmssl-docs2.0/guide/command-tools-examples.html#sm4算法" class="sidebar-link">SM4算法</a></li><li class="sidebar-sub-header"><a href="/gmssl-docs2.0/guide/command-tools-examples.html#sm9算法" class="sidebar-link">SM9算法</a></li><li class="sidebar-sub-header"><a href="/gmssl-docs2.0/guide/command-tools-examples.html#zuc算法" class="sidebar-link">ZUC算法</a></li><li class="sidebar-sub-header"><a href="/gmssl-docs2.0/guide/command-tools-examples.html#ca" class="sidebar-link">CA</a></li><li class="sidebar-sub-header"><a href="/gmssl-docs2.0/guide/command-tools-examples.html#数字证书" class="sidebar-link">数字证书</a></li><li class="sidebar-sub-header"><a href="/gmssl-docs2.0/guide/command-tools-examples.html#cms" class="sidebar-link">CMS</a></li><li class="sidebar-sub-header"><a href="/gmssl-docs2.0/guide/command-tools-examples.html#pbkdf2算法" class="sidebar-link">PBKDF2算法</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="gmssl命令行工具示例"><a href="#gmssl命令行工具示例" class="header-anchor">#</a> gmssl命令行工具示例</h1> <p>本部分将结合一些典型的应用场景对gmssl命令行工具的具体使用方法进行介绍，具体每个命令行的功能及使用方法请参看上一部分。</p> <h2 id="sm2算法"><a href="#sm2算法" class="header-anchor">#</a> SM2算法</h2> <h3 id="sm2密钥对生成"><a href="#sm2密钥对生成" class="header-anchor">#</a> SM2密钥对生成</h3> <p>生成SM2私钥sm2.pem，公钥sm2pub.pem</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl sm2keygen -pass 1234 -out sm2.pem -pubout sm2pub.pem
</code></pre></div><h3 id="sm2加密解密"><a href="#sm2加密解密" class="header-anchor">#</a> SM2加密解密</h3> <p>首先生成SM2公私钥对</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl sm2keygen -pass 1234 -out sm2.pem -pubout sm2pub.pem
</code></pre></div><p>然后使用SM2私钥、私钥加密口令对数据进行签名</p> <div class="language- extra-class"><pre class="language-text"><code>echo hello | gmssl sm2sign -key sm2.pem -pass 1234 -out sm2.sig 

id默认为1234567812345678，也可以手动指定
echo hello | gmssl sm2sign -key sm2.pem -pass 1234 -out sm2.sig -id 1234567812345678
</code></pre></div><h3 id="sm2签名验签"><a href="#sm2签名验签" class="header-anchor">#</a> SM2签名验签</h3> <p>生成SM2公私钥对</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl sm2keygen -pass 1234 -out sm2.pem -pubout sm2pub.pem
</code></pre></div><p>使用SM2私钥、私钥加密口令对数据进行签名</p> <div class="language- extra-class"><pre class="language-text"><code>echo hello | gmssl sm2sign -key sm2.pem -pass 1234 -out sm2.sig 

id默认为1234567812345678，也可以手动指定
echo hello | gmssl sm2sign -key sm2.pem -pass 1234 -out sm2.sig -id 1234567812345678
</code></pre></div><p>使用SM2公钥进行验签</p> <div class="language- extra-class"><pre class="language-text"><code>echo hello | gmssl sm2verify -pubkey sm2pub.pem -sig sm2.sig -id 1234567812345678
</code></pre></div><h2 id="sm3算法"><a href="#sm3算法" class="header-anchor">#</a> SM3算法</h2> <p>使用SM3算法对Linux 管道的数据进行哈希</p> <div class="language- extra-class"><pre class="language-text"><code>echo -n abc | gmssl sm3
</code></pre></div><p>当指定-pubkey的时候，表示生成SM2签名所需的中间结果</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl sm2keygen -pass 1234 -out sm2.pem -pubout sm2pub.pem
echo -n abc | gmssl sm3 -pubkey sm2pub.pem 
</code></pre></div><p>使用指定的key，对Linux管道的数据计算SM3 的HMAC</p> <div class="language- extra-class"><pre class="language-text"><code>echo -n abc | gmssl sm3hmac -key 11223344556677881122334455667788
</code></pre></div><h2 id="sm4算法"><a href="#sm4算法" class="header-anchor">#</a> SM4算法</h2> <p>设置SM4加密解密用到的参数</p> <div class="language- extra-class"><pre class="language-text"><code>KEY=11223344556677881122334455667788
IV=11223344556677881122334455667788
</code></pre></div><p>使用SM4 CBC模式对管道的数据进行加密解密，可以使用-in参数指定加密的文件，-out参数指定输出的文件</p> <div class="language- extra-class"><pre class="language-text"><code>echo hello | gmssl sm4 -cbc -encrypt -key $KEY -iv $IV -out sm4.cbc
gmssl sm4 -cbc -decrypt -key $KEY -iv $IV -in sm4.cbc
</code></pre></div><p>使用SM4 CTR模式，对管道的数据进行加密解密，可以使用-in参数指定加密的文件，-out参数指定输出的文件</p> <div class="language- extra-class"><pre class="language-text"><code>echo hello | gmssl sm4 -ctr -encrypt -key $KEY -iv $IV -out sm4.ctr
gmssl sm4 -ctr -decrypt -key $KEY -iv $IV -in sm4.ctr
</code></pre></div><h2 id="sm9算法"><a href="#sm9算法" class="header-anchor">#</a> SM9算法</h2> <h3 id="sm9签名验签"><a href="#sm9签名验签" class="header-anchor">#</a> SM9签名验签</h3> <p>初始化生成SM9 主公钥sign_mpk.pem、主私钥sign_msk.pem</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl sm9setup -alg sm9sign -pass 1234 -out sign_msk.pem -pubout sign_mpk.pem
</code></pre></div><p>使用主私钥生成用户alice的用户私钥alice.pem，并使用outpass参数指定的口令加密</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl sm9keygen -alg sm9sign -in sign_msk.pem -inpass 1234 -id alice -out alice.pem -outpass 1234
</code></pre></div><p>使用用户alice的用户私钥对数据进行签名，生成签名hello.sig</p> <div class="language- extra-class"><pre class="language-text"><code>echo hello | gmssl sm9sign -key alice.pem -pass 1234  -out hello.sig
</code></pre></div><p>使用主公钥sign_mpk.pem对签名数据进行验签</p> <div class="language- extra-class"><pre class="language-text"><code>echo hello | gmssl sm9verify -pubmaster sign_mpk.pem -id alice -sig hello.sig
</code></pre></div><h3 id="sm9加密解密"><a href="#sm9加密解密" class="header-anchor">#</a> SM9加密解密</h3> <p>初始化生成SM9 主公钥enc_mpk.pem、主私钥enc_msk.pem</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl sm9setup -alg sm9encrypt -pass 1234 -out enc_msk.pem -pubout enc_mpk.pem
</code></pre></div><p>使用主私钥生成用户bob的用户私钥bob.pem，并使用outpass参数指定的口令加密</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl sm9keygen -alg sm9encrypt -in enc_msk.pem -inpass 1234 -id bob -out bob.pem -outpass 1234
</code></pre></div><p>使用主公钥以及用户bob的id进行加密，生成加密文件hello.der</p> <div class="language- extra-class"><pre class="language-text"><code>echo hello | gmssl sm9encrypt -pubmaster enc_mpk.pem -id bob -out hello.der
</code></pre></div><p>使用用户bob的私钥对加密文件进行解密</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl sm9decrypt -key bob.pem -pass 1234 -id bob -in hello.der
</code></pre></div><h2 id="zuc算法"><a href="#zuc算法" class="header-anchor">#</a> ZUC算法</h2> <h3 id="zuc加密解密"><a href="#zuc加密解密" class="header-anchor">#</a> ZUC加密解密</h3> <p>由于ZUC算法是对称加密算法，所以加密解密的操作是一样的。</p> <p>设置ZUC算法加密所需的秘钥和IV</p> <div class="language- extra-class"><pre class="language-text"><code>KEY=11223344556677881122334455667788
IV=11223344556677881122334455667788
</code></pre></div><p>使用秘钥和IV对数据进行加密和解密</p> <div class="language- extra-class"><pre class="language-text"><code>echo hello | gmssl zuc -key $KEY -iv $IV -out zuc.bin
gmssl zuc -key $KEY -iv $IV -in zuc.bin
</code></pre></div><h2 id="ca"><a href="#ca" class="header-anchor">#</a> CA</h2> <h3 id="根ca自签发证书"><a href="#根ca自签发证书" class="header-anchor">#</a> 根CA自签发证书</h3> <p>首先生成CA根证书私钥rootcakey.pem，然后进行自签名，生成根证书rootcacert.pem</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl sm2keygen -pass 1234 -out rootcakey.pem
gmssl certgen -C CN -ST Beijing -L Haidian -O PKU -OU CS -CN ROOTCA -days 3650 -key rootcakey.pem -pass 1234 -out rootcacert.pem -key_usage keyCertSign -key_usage cRLSign
</code></pre></div><p>查看生成的自签名证书rootcacert.pem</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl certparse -in rootcacert.pem
</code></pre></div><h3 id="根ca签发二级ca证书"><a href="#根ca签发二级ca证书" class="header-anchor">#</a> 根CA签发二级CA证书</h3> <p>首先生成二级CA的证书私钥，然后生成证书请求careq.pem，然后由根CA进行签名，生成二级CA的证书cacert.pem</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl sm2keygen -pass 1234 -out cakey.pem
gmssl reqgen -C CN -ST Beijing -L Haidian -O PKU -OU CS -CN &quot;Sub CA&quot; -days 3650 -key cakey.pem -pass 1234 -out careq.pem
gmssl reqsign -in careq.pem -days 365 -key_usage keyCertSign -path_len_constraint 0 -cacert rootcacert.pem -key rootcakey.pem -pass 1234 -out cacert.pem
</code></pre></div><p>查看生成的二级CA证书cacert.pem</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl certparse -in cacert.pem
</code></pre></div><h3 id="二级ca签发用户证书"><a href="#二级ca签发用户证书" class="header-anchor">#</a> 二级CA签发用户证书</h3> <p>首先生成用户私钥，并通过用户私钥生成证书请求encreq.pem，然后由二级CA进行签发，生成用户证书enccert.pem</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl sm2keygen -pass 1234 -out enckey.pem
gmssl reqgen -C CN -ST Beijing -L Haidian -O PKU -OU CS -CN localhost -days 365 -key enckey.pem -pass 1234 -out encreq.pem
gmssl reqsign -in encreq.pem -days 365 -key_usage keyEncipherment -cacert cacert.pem -key cakey.pem -pass 1234 -out enccert.pem
</code></pre></div><p>查看生成的用户证书enccert.pem</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl certparse -in enccert.pem
</code></pre></div><p>将二级CA的证书和用户证书放在一个文件中，形成完整的用户证书文件certs.pem</p> <div class="language- extra-class"><pre class="language-text"><code>cat enccert.pem &gt; certs.pem
cat cacert.pem &gt;&gt; certs.pem
</code></pre></div><h2 id="数字证书"><a href="#数字证书" class="header-anchor">#</a> 数字证书</h2> <h3 id="生成自签名证书"><a href="#生成自签名证书" class="header-anchor">#</a> 生成自签名证书</h3> <p>生成证书公私钥对，然后使用certgen命令生成自签名证书cert.pem</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl sm2keygen -pass 1234 -out sm2.pem -pubout sm2pub.pem

gmssl certgen -C CN -ST Beijing -L Haidian -O PKU -OU CS -CN Alice -days 365 -key sm2.pem -pass 1234 \
  -key_usage &quot;digitalSignature&quot; -key_usage &quot;keyCertSign&quot; -key_usage cRLSign \
  -out cert.pem
</code></pre></div><h3 id="解析数字证书"><a href="#解析数字证书" class="header-anchor">#</a> 解析数字证书</h3> <div class="language- extra-class"><pre class="language-text"><code>gmssl certparse -in cert.pem
</code></pre></div><h2 id="cms"><a href="#cms" class="header-anchor">#</a> CMS</h2> <h3 id="cms加密"><a href="#cms加密" class="header-anchor">#</a> CMS加密</h3> <p>使用数字证书cert.pem（数字证书的生成可以参考[[#生成自签名证书]]或者CA相关部分）对plain.txt文件进行加密，生成加密文件enveloped_data.pem</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl cmsencrypt -in plain.txt -rcptcert cert.pem -out enveloped_data.pem
</code></pre></div><h3 id="cms解密"><a href="#cms解密" class="header-anchor">#</a> CMS解密</h3> <p>使用私钥key.pem对enveloped data进行解密</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl cmsdecrypt -key key.pem -pass 1234 -cert cert.pem -in enveloped_data.pem
</code></pre></div><h3 id="cms签名"><a href="#cms签名" class="header-anchor">#</a> CMS签名</h3> <p>使用证书cert.pem对plain.txt进行签名，输出为signed_data.pem</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl cmssign -key key.pem -pass 1234 -cert cert.pem -in plain.txt -out signed_data.pem
</code></pre></div><h3 id="cms验签"><a href="#cms验签" class="header-anchor">#</a> CMS验签</h3> <p>验证signed_data.pem，原始数据输出到signed_data.txt</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl cmsverify -in signed_data.pem -out signed_data.txt
</code></pre></div><h3 id="cms解析"><a href="#cms解析" class="header-anchor">#</a> CMS解析</h3> <p>解析CMS签名数据signed_data.pem</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl cmsparse -in signed_data.pem
</code></pre></div><h2 id="pbkdf2算法"><a href="#pbkdf2算法" class="header-anchor">#</a> PBKDF2算法</h2> <p>使用PBKDF2算法，对password 1234 和salt进行6000次哈希计算</p> <div class="language- extra-class"><pre class="language-text"><code>gmssl pbkdf2 -pass 1234 -salt 1122334455667788 -iter 60000 -outlen 16
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/gmssl-docs2.0/guide/command-tools.html" class="prev">
        gmssl命令行工具介绍
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/gmssl-docs2.0/assets/js/app.1d85ac51.js" defer></script><script src="/gmssl-docs2.0/assets/js/2.a98f6d9f.js" defer></script><script src="/gmssl-docs2.0/assets/js/1.43cfabac.js" defer></script><script src="/gmssl-docs2.0/assets/js/31.ef8c3c31.js" defer></script>
  </body>
</html>
